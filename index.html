<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>RailQuick Essentials - Quick Service on Rail</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css" />
</head>
<body class="min-h-screen">

    <!-- Header (Always Visible) - IR Branding -->
    <header class="bg-white shadow-lg sticky top-0 z-10 border-b-4 border-indigo-700">
        <div class="max-w-7xl mx-auto p-4 flex flex-col sm:flex-row justify-between items-center">
            
            <div class="flex justify-between items-center w-full sm:w-auto mb-2 sm:mb-0">
                <!-- Branding: Deep Blue for RailQuick -->
                <h1 class="text-3xl font-extrabold text-indigo-800 tracking-wider">
                    <span class="text-red-600">ðŸš†</span> RAILQUICK
                </h1>
            </div>

            <!-- Dynamic Location Display (Visible only in App View) -->
            <div id="appHeaderLocation" class="hidden items-center space-x-2 bg-indigo-50 p-2 rounded-xl border border-indigo-200 w-full sm:w-auto cursor-pointer group hover:bg-indigo-100" onclick="showView('home')">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-indigo-600 group-hover:text-indigo-800" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                </svg>
                <span id="currentLocationDisplay" class="bg-indigo-50 text-indigo-800 focus:outline-none w-full text-sm font-semibold group-hover:underline">Varanasi JN, PF 2, Pin Point C</span>
            </div>

            <!-- Cart Button for mobile (Red for urgency) - Click handler added in JS -->
            <button id="mobileCartButton" class="sm:hidden fixed bottom-6 right-6 bg-red-600 text-white p-4 rounded-full shadow-2xl z-20 transition duration-300 hover:bg-red-700 transform scale-105" onclick="checkout()">
                <div class="relative">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                    </svg>
                    <span id="cartCountMobile" class="absolute -top-1 -right-1 bg-yellow-400 text-xs text-indigo-900 rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-md">0</span>
                </div>
            </button>
        </div>
    </header>

    <!-- HOME/LOCATION SELECTION VIEW (Responsive for Mobile/Tablet) -->
    <div id="homeView" class="view-transition max-w-lg mx-auto p-4 flex flex-col items-center justify-center min-h-[calc(100vh-80px)]">
        <h2 class="text-3xl font-extrabold text-indigo-900 mb-8 text-center bg-white p-3 rounded-xl shadow-lg w-full">
            <span class="text-red-600">âœ“</span> QUICK SERVICE DELIVERY
        </h2>

        <div class="w-full space-y-5">
            <button onclick="toggleLocationForm('train')" class="w-full flex items-center justify-center p-5 bg-indigo-700 text-white text-xl font-bold rounded-xl shadow-xl hover:bg-indigo-800 transition duration-200 transform hover:scale-[1.01]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" />
                </svg>
                I AM ON A TRAIN (PNR)
            </button>

            <button onclick="toggleLocationForm('platform')" class="w-full flex items-center justify-center p-5 bg-indigo-700 text-white text-xl font-bold rounded-xl shadow-xl hover:bg-indigo-800 transition duration-200 transform hover:scale-[1.01]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0l-4.243-4.243a8 8 0 1111.314 0z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                </svg>
                I AM ON THE PLATFORM
            </button>
        </div>

        <!-- Train Form -->
        <div id="trainForm" class="hidden w-full mt-8 p-6 bg-white rounded-xl shadow-2xl border border-gray-200 space-y-4">
            <h3 class="text-xl font-semibold text-indigo-700">Train Seat Delivery (PNR)</h3>
            <input type="text" id="trainNoInput" placeholder="Enter Train Number" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" value="12137">
            <input type="text" id="pnrInput" placeholder="Enter PNR Number" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500" value="1234567890">
            <button onclick="submitLocation('train')" class="w-full p-3 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition duration-200 shadow-md shadow-red-300">
                Find My Seat & Start Shopping
            </button>
        </div>

        <!-- Platform Form -->
        <div id="platformForm" class="hidden w-full mt-8 p-6 bg-white rounded-xl shadow-2xl border border-gray-200 space-y-4">
            <h3 class="text-xl font-semibold text-indigo-700">Platform Pin Point Delivery</h3>
            
            <select id="stationSelect" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                <option value="Varanasi JN">Varanasi JN (BSB)</option>
                <option value="New Delhi">New Delhi (NDLS)</option>
                <option value="Mumbai CSMT">Mumbai CSMT (CSMT)</option>
            </select>
            
            <select id="platformNoInput" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                <option value="" disabled>Select Platform Number</option>
                <option value="1">Platform 1</option>
                <option value="2" selected>Platform 2</option>
                <option value="3">Platform 3</option>
                <option value="4">Platform 4</option>
                <option value="5">Platform 5</option>
                <option value="6">Platform 6</option>
                <option value="7">Platform 7</option>
                <option value="8">Platform 8</option>
                <option value="9">Platform 9</option>
                <option value="10">Platform 10</option>
            </select>
            
            <select id="pinPointInput" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500">
                <option value="" disabled>Select Pin Point Location</option>
                <option value="A">Pin Point A</option>
                <option value="B">Pin Point B</option>
                <option value="C" selected>Pin Point C</option>
                <option value="D">Pin Point D</option>
                <option value="E">Pin Point E</option>
                <option value="F">Pin Point F</option>
                <option value="G">Pin Point G</option>
                <option value="H">Pin Point H</option>
                <option value="I">Pin Point I</option>
                <option value="J">Pin Point J</option>
                <option value="K">Pin Point K</option>
                <option value="L">Pin Point L</option>
                <option value="M">Pin Point M</option>
                <option value="N">Pin Point N</option>
            </select>
            
            <button onclick="submitLocation('platform')" class="w-full p-3 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition duration-200 shadow-md shadow-red-300">
                Start Shopping
            </button>
        </div>

    </div>

    <!-- MAIN CONTENT AREA (APP VIEW) -->
    <div id="appView" class="view-transition hidden max-w-7xl mx-auto flex flex-col lg:flex-row p-4">
        
        <!-- Left Column: Category Navigation & Products -->
        <main class="flex-1 w-full lg:w-3/4 order-2 lg:order-1">

            <div id="categoryNav" class="category-scroll-container flex space-x-4 p-2 mb-6 overflow-x-auto whitespace-nowrap bg-white rounded-xl shadow-md border border-gray-100">
                <!-- Categories injected by JS -->
            </div>
            
            <section class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="productGrid">
                <!-- Products injected by JS -->
            </section>
        </main>
        
        <!-- Right Column: Cart Summary -->
        <aside class="w-full lg:w-1/4 lg:pl-6 sticky top-24 lg:h-[calc(100vh-100px)] order-1 lg:order-2 mb-6 lg:mb-0">
            <div id="mobileCartSummary" class="bg-white p-4 rounded-xl shadow-lg lg:hidden mb-4">
                <h3 class="text-xl font-extrabold text-indigo-800 mb-2">Cart Details</h3>
                <div class="flex justify-between items-center text-lg font-bold text-red-600 border-b pb-2 mb-2">
                    <span>Total Items:</span>
                    <span id="cartCountMobileSummary">0</span>
                </div>
                <div class="flex justify-between items-center text-2xl font-extrabold text-red-600">
                    <span>TOTAL:</span>
                    <span id="cartTotalMobile">â‚¹15.00</span>
                </div>
            </div>

            <div class="bg-white p-6 rounded-xl shadow-2xl border-t-4 border-red-600 hidden lg:block">
                <h2 class="text-xl font-extrabold text-indigo-800 mb-4 flex items-center justify-between">
                    Your Order Summary
                    <span id="cartCountDesktop" class="bg-indigo-100 text-indigo-600 text-sm font-semibold px-2 py-1 rounded-full">0 items</span>
                </h2>
                
                <div id="cartItemsList" class="space-y-4 mb-6 max-h-96 overflow-y-auto">
                    <p class="text-gray-500 text-sm text-center py-4" id="emptyCartMessage">Your cart is empty. Add essentials!</p>
                </div>
                
                <div class="border-t pt-4 space-y-2">
                    <div class="flex justify-between font-bold text-gray-700">
                        <span>Subtotal:</span>
                        <span id="cartSubtotal">â‚¹0.00</span>
                    </div>

                    <div class="pt-2">
                        <h3 class="text-sm font-bold text-indigo-800 mb-1">Coupon Code</h3>
                        <div class="flex space-x-2">
                            <input type="text" id="couponInput" placeholder="Enter Code" class="flex-1 p-2 border border-gray-300 rounded-lg text-sm uppercase focus:ring-indigo-500 focus:border-indigo-500">
                            <button onclick="applyCoupon()" class="bg-indigo-600 text-white text-sm font-semibold px-3 py-2 rounded-lg hover:bg-indigo-700 transition duration-200">
                                Apply
                            </button>
                        </div>
                        <p id="couponMessage" class="text-xs text-red-500 mt-1 h-3"></p>
                    </div>
                    
                    <div id="discountRow" class="hidden flex justify-between text-base font-bold text-green-600 border-t pt-2">
                        <span>Discount (<span id="discountCodeDisplay"></span>):</span>
                        <span id="discountAmountDisplay">-â‚¹0.00</span>
                    </div>

                    <div class="flex justify-between text-sm text-gray-500 border-b pb-2">
                        <span>Delivery Fee:</span>
                        <span class="font-semibold text-red-600" id="deliveryFeeDisplay">â‚¹15.00</span>
                    </div>
                    
                    <div class="mt-4 pt-4 border-t space-y-3">
                        <h3 class="text-sm font-bold text-indigo-800">Payment Method</h3>
                        <div class="flex flex-col space-y-2">
                            <label class="inline-flex items-center">
                                <input type="radio" name="payment" value="Online" id="paymentOnline" class="form-radio text-indigo-600 h-4 w-4" checked>
                                <span class="ml-2 text-sm text-gray-700">Online Payment (UPI/Card)</span>
                            </label>
                            <label class="inline-flex items-center">
                                <input type="radio" name="payment" value="COD" id="paymentCOD" class="form-radio text-indigo-600 h-4 w-4">
                                <span class="ml-2 text-sm text-gray-700 font-bold">Cash on Delivery</span>
                            </label>
                        </div>
                    </div>

                    <div class="flex justify-between text-2xl font-extrabold text-red-600 pt-2">
                        <span>TOTAL:</span>
                        <span id="cartTotalDesktop">â‚¹15.00</span>
                    </div>
                </div>

                <button id="checkoutButtonDesktop" class="mt-6 w-full bg-red-600 text-white font-semibold py-3 rounded-xl hover:bg-red-700 transition duration-200 shadow-xl shadow-red-400 transform hover:scale-[1.01]" onclick="checkout()">
                    Proceed to Checkout
                </button>
            </div>
        </aside>

    </div>

    <!-- External JS -->
    <script src="script.js"></script>
</body>
</html>
